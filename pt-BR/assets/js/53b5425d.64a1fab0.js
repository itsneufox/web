"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["60957"],{4836:function(e,a,o){o.r(a),o.d(a,{frontMatter:()=>i,toc:()=>t,default:()=>l,metadata:()=>r,assets:()=>c,contentTitle:()=>d});var r=JSON.parse('{"id":"scripting/language/reference/Assorted-tips","title":"Dicas variadas","description":"---","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/scripting/language/reference/12-Assorted-tips.md","sourceDirName":"scripting/language/reference","slug":"/scripting/language/reference/Assorted-tips","permalink":"/pt-BR/docs/scripting/language/reference/Assorted-tips","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/edit/master/frontend/i18n/pt-BR/docusaurus-plugin-content-docs/current/scripting/language/reference/12-Assorted-tips.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Pitfalls-differences-from-C","permalink":"/pt-BR/docs/scripting/language/reference/Pitfalls-differences-from-C"},"next":{"title":"Appendices","permalink":"/pt-BR/docs/scripting/language/reference/Appendices"}}'),n=o(85893),s=o(50065);let i={},d="Dicas variadas",c={},t=[{value:"Trabalhando com caracteres e strings",id:"trabalhando-com-caracteres-e-strings",level:2},{value:"Loops for, declara\xe7\xf5es opcionais",id:"loops-for-declara\xe7\xf5es-opcionais",level:2},{value:"Usando macros com array",id:"usando-macros-com-array",level:2},{value:"Operador char",id:"operador-char",level:2},{value:"Evitando recurs\xe3o",id:"evitando-recurs\xe3o",level:2},{value:"Usando constantes simb\xf3licas",id:"usando-constantes-simb\xf3licas",level:2},{value:"Acesso a c\xe9lulas nas strings empacotadas",id:"acesso-a-c\xe9lulas-nas-strings-empacotadas",level:2},{value:"Formatadores gen\xe9ricos de sa\xedda",id:"formatadores-gen\xe9ricos-de-sa\xedda",level:2},{value:"O operador &quot;query&quot; do formatador",id:"o-operador-query-do-formatador",level:2},{value:"Tags fortes e fracos",id:"tags-fortes-e-fracos",level:2},{value:"Comparando &quot;ma\xe7\xe3s&quot; e &quot;laranjas&quot;",id:"comparando-ma\xe7\xe3s-e-laranjas",level:2},{value:"Evitando sair de um script em execu\xe7\xe3o",id:"evitando-sair-de-um-script-em-execu\xe7\xe3o",level:2},{value:"Entrada de arquivo em PAWN",id:"entrada-de-arquivo-em-pawn",level:2},{value:"Fixando um endere\xe7o ou de um array local global",id:"fixando-um-endere\xe7o-ou-de-um-array-local-global",level:2},{value:"Alternativas para printf",id:"alternativas-para-printf",level:2},{value:"PAWN contra a escassez de mem\xf3ria",id:"pawn-contra-a-escassez-de-mem\xf3ria",level:2},{value:"Armadilhas adicionais",id:"armadilhas-adicionais",level:2}];function m(e){let a={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"dicas-variadas",children:"Dicas variadas"})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"trabalhando-com-caracteres-e-strings",children:"Trabalhando com caracteres e strings"}),"\n",(0,n.jsx)(a.p,{children:'Uma string "empacotada" \xe9 uma s\xe9rie de caracteres empacotados em c\xe9lulas, e uma c\xe9lula cont\xe9m tipicamente quatro caracteres empacotados. Um caractere \xe9 ent\xe3o tipicamente de 8 bits. Uma string "n\xe3o empacotada" tem um caractere por c\xe9lula. Por padr\xe3o, um caractere em uma string n\xe3o empacotada tamb\xe9m tem 8 bits; o relat\xf3rio "Implementer\'s Guide" descreve como criar implementa\xe7\xf5es com caracteres de 16 bits.'}),"\n",(0,n.jsx)(a.p,{children:"A diferen\xe7a essencial entre strings empacotadas e n\xe3o empacotadas \xe9 que strings empacotadas s\xe3o mais econ\xf4micas \u2014 os exemplos discutidos neste manual s\xe3o para 32 bits, e c\xe9lulas de 32 bits ajustam quatro caracteres de 8 bits. Para manipula\xe7\xe3o pesada de strings, strings n\xe3o empacotadas podem ser mais f\xe1ceis de usar."}),"\n",(0,n.jsx)(a.p,{children:'A maioria das fun\xe7\xf5es de biblioteca padr\xe3o de strings pode trabalhar tanto com strings empacotadas quanto n\xe3o empacotadas. O tipo de string que uma vari\xe1vel pode conter \xe9 determinado na sua declara\xe7\xe3o. Para uma vari\xe1vel que cont\xe9m a string "Hello world!", voc\xea poderia declarar:'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: string empacotada"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'new msg[] = !"Hello world!"\n'})}),"\n",(0,n.jsx)(a.p,{children:"ou:"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: string n\xe3o empacotada"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'new msg[] = "Hello world!"\n'})}),"\n",(0,n.jsx)(a.p,{children:'A diferen\xe7a entre as duas declara\xe7\xf5es s\xe3o o caractere "!" que precede a string, e o tamanho do array "msg" \u2014 que \xe9 invis\xedvel na declara\xe7\xe3o, pois a dimens\xe3o \xe9 implicitamente definida pelo comprimento da constante string inicializadora. Na primeira declara\xe7\xe3o, o string est\xe1 empacotado e o array msg tem 4 c\xe9lulas; na segunda declara\xe7\xe3o, o array tem 13 c\xe9lulas, um por cada caractere mais um terminador.'}),"\n",(0,n.jsx)(a.p,{children:"Em praticamente todos os aspectos, a sintaxe e sem\xe2ntica de strings empacotadas foram comparadas a strings n\xe3o empacotadas ignorando-se a diferen\xe7a no requisito de mem\xf3ria."}),"\n",(0,n.jsx)(a.p,{children:"Observa\xe7\xe3o: Voc\xea pode escolher definir a cadeia de caracteres empacotada como padr\xe3o, a diretiva #pragma pack ajuda com isso; veja p\xe1gina 121."}),"\n",(0,n.jsx)(a.p,{children:"A maioria das fun\xe7\xf5es para operar em strings podem funcionar tanto com strings empacotadas quanto n\xe3o empacotadas. Veja p\xe1gina 140 para a biblioteca de fun\xe7\xf5es de string\n."}),"\n",(0,n.jsx)(a.h2,{id:"loops-for-declara\xe7\xf5es-opcionais",children:"Loops for, declara\xe7\xf5es opcionais"}),"\n",(0,n.jsx)(a.p,{children:"Todas as tr\xeas express\xf5es de uma declara\xe7\xe3o for s\xe3o opcionais. Nos exemplos abaixo, vale notar que o valor da express\xe3o de \xedndice \xe9 testado antes de cada itera\xe7\xe3o, incluindo o primeiro, ent\xe3o se o \xedndice \xe9 inicializado com o valor final antes de entrar no loop for, o loop n\xe3o itera mesmo uma \xfanica vez."}),"\n",(0,n.jsx)(a.p,{children:'Especificar a declara\xe7\xe3o for sem uma express\xe3o de condi\xe7\xe3o (a declara\xe7\xe3o de controle do loop ou o "\xedndice" do loop) cria um loop infinito. Voc\xea pode usar goto ou return para encerrar esse loop. Voc\xea tamb\xe9m pode usar uma declara\xe7\xe3o break para abortar um loop, seja um loop infinito ou outro loop.'}),"\n",(0,n.jsx)(a.p,{children:"Omitir o segundo campo (a especifica\xe7\xe3o de condi\xe7\xe3o de loop) de uma declara\xe7\xe3o for resulta em um loop que nunca termina. Voc\xea deve, portanto, ter c\xf3digo para sair do loop na declara\xe7\xe3o que a declara\xe7\xe3o for controla."}),"\n",(0,n.jsx)(a.p,{children:'Listagem: "Forever" loop'}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"for ( ;; )\n{\n    // ...c\xf3digo para loop indefinidamente\n}\n"})}),"\n",(0,n.jsx)(a.p,{children:"Loops while e do-while s\xe3o equivalentes a loops for, e tamb\xe9m podem fazer loops infinitos."}),"\n",(0,n.jsx)(a.p,{children:'Uma forma mais interessante de "loop infinito" \xe9 aquela que tem uma condi\xe7\xe3o de sa\xedda no meio do corpo do loop. Voc\xea pode codificar uma condi\xe7\xe3o de sa\xedda no meio do corpo do loop de qualquer loop, mas um loop infinito torna essa condi\xe7\xe3o de sa\xedda no meio do corpo mais evidente.'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: loop infinito com condi\xe7\xe3o de sa\xedda no meio do corpo"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"for ( ;; )\n{\n    // ...instru\xe7\xf5es para executar antes da condi\xe7\xe3o de sa\xedda\n    if (condi\xe7\xe3o)\n        break;\n    // ...instru\xe7\xf5es para executar somente quando a condi\xe7\xe3o for falsa\n}\n"})}),"\n",(0,n.jsx)(a.p,{children:'Voc\xea (aparentemente) tamb\xe9m pode criar um loop infinito omitindo toda a parte entre par\xeanteses. No entanto, um ponto e v\xedrgula \xe9 o "placeholder" para uma declara\xe7\xe3o vazia; portanto, uma declara\xe7\xe3o for sem par\xeanteses \xe9 na verdade uma declara\xe7\xe3o for com todas as tr\xeas campos em branco.'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: loop infinito; sintaxe alternativa"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"for (;;)\n{\n    // ...\n}\n"})}),"\n",(0,n.jsx)(a.p,{children:'Os par\xeanteses s\xe3o obrigat\xf3rios, porque for (;;;) n\xe3o \xe9 uma declara\xe7\xe3o v\xe1lida. Alguns leitores podem n\xe3o notar a diferen\xe7a entre os par\xeanteses "(;;)" e aqueles "( ;; )", portanto esta sintaxe alternativa \xe9 um idioma que n\xe3o melhora a clareza do c\xf3digo.'}),"\n",(0,n.jsx)(a.h2,{id:"usando-macros-com-array",children:"Usando macros com array"}),"\n",(0,n.jsx)(a.p,{children:"Macros para PAWN s\xe3o escritas com a diretiva #define; macros para PAWN n\xe3o t\xeam a flexibilidade de macros orientadas a texto como as do pr\xe9-processador C. Para o prop\xf3sito deste exemplo, suponha que exista uma string a que voc\xea queira atribuir outra string. Se existe a fun\xe7\xe3o strcpy, voc\xea pode assumir o c\xf3digo:"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: strcpy \u2014 fragmento"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'strcpy(a, "foo")\n'})}),"\n",(0,n.jsx)(a.p,{children:'onde "a" \xe9 a string que voc\xea deseja atribuir e "foo" \xe9 a nova string. Voc\xea pode tamb\xe9m assumir que para converter um array "n\xe3o empacotado" a "empacotado" tudo que voc\xea precisa fazer \xe9 adicionar um ponto de exclama\xe7\xe3o. O c\xf3digo abaixo, no entanto, \xe9 errado:'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: strcpy \u2014 fragmento com erro"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'#define foo "bar"\nstrcpy(a, foo)\nstrcpy(a, !foo)   // esta linha est\xe1 errada\n'})}),"\n",(0,n.jsx)(a.p,{children:'A terceira linha no fragmento acima ir\xe1 dar um erro. A constru\xe7\xe3o "!foo" n\xe3o faz sentido: o \xe9 o operador "n\xe3o" (ou "complemento") e foo n\xe3o \xe9 um valor v\xe1lido para aplicar o operador. A solu\xe7\xe3o \xe9 criar a macro com o ponto de exclama\xe7\xe3o inclu\xeddo:'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: strcpy \u2014 fragmento com macro"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'#define foo !"bar"\nstrcpy(a, foo)\n'})}),"\n",(0,n.jsx)(a.h2,{id:"operador-char",children:"Operador char"}),"\n",(0,n.jsx)(a.p,{children:'O operador char foi concebido para o prop\xf3sito de declarar arrays de caracteres que t\xeam um n\xfamero suficiente de c\xe9lulas para conter um certo n\xfamero de caracteres empacotados. O operador foi projetado para que voc\xea pudesse calcular o tamanho de um buffer contendo uma string "empacotada". Por exemplo, se voc\xea quiser 40 caracteres empacotados, a declara\xe7\xe3o:'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: declara\xe7\xe3o de vari\xe1vel char"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"new a[40 char]\n"})}),"\n",(0,n.jsx)(a.p,{children:"cria uma vari\xe1vel de array que tem espa\xe7o para 40 caracteres empacotados e o n\xfamero m\xednimo de c\xe9lulas para encaixar. Isso contrasta com"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: declara\xe7\xe3o de vari\xe1vel char"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"new a[40]\n"})}),"\n",(0,n.jsxs)(a.p,{children:["que, \xe9 claro, declara 40 c\xe9lulas, cada uma sendo capaz de armazenar 1 caractere n\xe3o empacotado. Pegar um caractere empacotado do array tamb\xe9m exigiria um pouco de c\xf3digo: voc\xea precisa saber em qual c\xe9lula o caractere est\xe1, e em qual byte da c\xe9lula espec\xedfica. O operador de chaves, ",", encapsula esse c\xe1lculo. Para obter o n-\xe9simo caractere do array a, diga ",(0,n.jsx)(a.code,{children:"a{n}"}),"."]}),"\n",(0,n.jsx)(a.p,{children:'Como corol\xe1rio para usar char no tamanho do array, voc\xea tamb\xe9m pode usar char no \xedndice do array. Digamos que voc\xea queira declarar uma vari\xe1vel que contenha qualquer n\xfamero n\xe3o negativo at\xe9 100.000 e que voc\xea deseja armazenar essa vari\xe1vel em um arquivo. \xc9 mais f\xe1cil escrever a vari\xe1vel como uma string "empacotada" do que como um n\xfamero bin\xe1rio (32 bits), porque ler de volta exige cuidado, j\xe1 que o analisador de arquivo pode n\xe3o usar os mesmos padr\xf5es de ordena\xe7\xe3o de bytes e tamanho de palavras. Ent\xe3o voc\xea pode querer analisar a vari\xe1vel em uma string, calcular o n\xfamero de bytes que ela precisa e armazenar os bytes em um arquivo.'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: calcular tamanho de caracteres"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'#include <console>\n\nmain()\n{\n    new count = 12345\n    new a[20 char]\n    strformat a, _, true, "%d", count   // armazena o n\xfamero como string\n    new len = strlen(a)                  // obt\xe9m o comprimento em caracteres\n    printf "Comprimento do n\xfamero \xe9 %d caracteres.\\n", len\n    printf "...o que ocupa %d c\xe9lulas.\\n", len char\n}\n'})}),"\n",(0,n.jsx)(a.p,{children:'Nas listagens anteriores, o snippet de c\xf3digo requer uma fun\xe7\xe3o de string "strlen" que retorna o comprimento da string em caracteres. Embora uma implementa\xe7\xe3o possa fornecer uma fun\xe7\xe3o strlen, n\xe3o \xe9 uma fun\xe7\xe3o do n\xfacleo.'}),"\n",(0,n.jsx)(a.p,{children:"Observe como, em um caso, aplicamos char no tamanho do array \xe9 ap\xf3s o tamanho, enquanto na\noutra aplica\xe7\xe3o de char para obter um comprimento que expressa o n\xfamero de c\xe9lulas\nnecess\xe1rias para armazenar um n\xfamero de caracteres empacotados, o operador char \xe9 aplicado ap\xf3s o comprimento\nda string (que \xe9 em bytes ou caracteres empacotados)."}),"\n",(0,n.jsx)(a.h2,{id:"evitando-recurs\xe3o",children:"Evitando recurs\xe3o"}),"\n",(0,n.jsx)(a.p,{children:"Pawn oferece suporte completo \xe0 recurs\xe3o, mas para implement\xe1-la, ela precisa usar sua pilha para passagem de par\xe2metros e vari\xe1veis locais \u2014 veja p\xe1gina 64. Em sistemas embarcados, onde a mem\xf3ria \xe9 escassa, fun\xe7\xf5es recursivas frequentemente n\xe3o s\xe3o a melhor solu\xe7\xe3o. A pilha da m\xe1quina abstrata tamb\xe9m pode n\xe3o permitir grandes profundidades de recurs\xe3o."}),"\n",(0,n.jsx)(a.p,{children:"Por exemplo, suponha que voc\xea queira calcular a s\xe9rie de Fibonacci. Para calcular um item, voc\xea precisa conhecer seus dois itens anteriores. Isso \xe9 recorr\xeancia, n\xe3o recurs\xe3o, portanto voc\xea n\xe3o precisa usar uma fun\xe7\xe3o recursiva."}),"\n",(0,n.jsx)(a.p,{children:"Listagem: fibonacci \u2014 fun\xe7\xe3o recursiva"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"/* Calcular um n\xfamero de Fibonacci pelo m\xe9todo tradicional */\nfibonacci(n)\n{\n    assert n > 0\n    if (n < 3)\n        return 1\n    return fibonacci(n - 2) + fibonacci(n - 1)\n}\n\n"})}),"\n",(0,n.jsx)(a.p,{children:"Listagem: fibonacci \u2014 fun\xe7\xe3o iterativa"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"/* Calcular um n\xfamero de Fibonacci pela itera\xe7\xe3o */\nfibonacci(n)\n{\n    assert n > 0\n    new a = 0, b = 1  /* valores sementes para os dois primeiros termos */\n    for (new i = 1; i < n; i++)\n    {\n        new tmp = a\n        a = b\n        b = tmp + a\n    }\n    return b\n}\n"})}),"\n",(0,n.jsx)(a.p,{children:"A fun\xe7\xe3o iterativa \xe9 mais r\xe1pida, usa menos recursos e permite valores maiores de n. Para\nsistemas embarcados, especialmente quando a mem\xf3ria \xe9 escassa, a solu\xe7\xe3o iterativa \xe9 a op\xe7\xe3o\nprefer\xedvel."}),"\n",(0,n.jsx)(a.h2,{id:"usando-constantes-simb\xf3licas",children:"Usando constantes simb\xf3licas"}),"\n",(0,n.jsx)(a.p,{children:'Existem v\xe1rios tipos de constantes simb\xf3licas em PAWN. Uma constante simb\xf3lica literal\nfunciona como uma mudan\xe7a de caractere; a constante \xe9 descartada junto com seu valor, e qualquer\napari\xe7\xe3o da constante "pesquisada" no texto \xe9 substitu\xedda pelo seu substituto\ntexto. Constantes simb\xf3licas literais s\xe3o criadas com a diretiva #define. A\nsintaxe da diretiva #define cria substitui\xe7\xf5es baseadas em padr\xf5es.'}),"\n",(0,n.jsx)(a.p,{children:'A diretiva enum cria constantes com valores inteiros consecutivos. Por\npadr\xe3o, a primeira constante enum tem o valor zero. Voc\xea pode usar valores enum\npara criar matrizes "nomeados", como a sugest\xe3o do exemplo abaixo.'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: defini\xe7\xf5es de constantes de cor"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'enum color\n{\n    red,\n    green,\n    blue\n}\n\nnew palette[][color] = {\n    { 0, 0, 0 },        /* preto */\n    { 255, 0, 0 },      /* vermelho */\n    { 255, 128, 0 },    /* laranja */\n    { 255, 255, 0 },    /* amarelo */\n    { 0, 255, 0 },      /* verde */\n    { 0, 255, 255 },    /* ciano */\n    { 0, 0, 255 },      /* azul */\n    { 255, 0, 255 },    /* violeta */\n    { 255, 255, 255 }   /* branco */\n}\nmain()\n{\n    print("A cor laranja cont\xe9m estes valores:", red, green, blue);\n    print(palette[2][red], palette[2][green], palette[2][blue]);\n}\n'})}),"\n",(0,n.jsx)(a.p,{children:"Finalmente, a diretiva const cria uma constante com um valor inteiro; a\nsintaxe permite declarar m\xfaltiplas constantes em uma linha."}),"\n",(0,n.jsx)(a.p,{children:'Ao declarar constantes, voc\xea deve considerar qual o melhor tipo de constante\nse adequa ao problema: as constantes simb\xf3licas literais da diretiva #define\nsuportam strings, padr\xf5es e inteiros (decimais, hexadecimais e\nbin\xe1rios). Os "enums" criados com a diretiva enum s\xe3o apenas inteiros, mas\nt\xeam a vantagem de ajustar automaticamente os valores das constantes quando\nvoc\xea adiciona ou remove constantes do meio da lista.\nAs constantes de const s\xe3o sempre inteiros, e voc\xea deve especificar um valor expl\xedcito\npara cada constante.'}),"\n",(0,n.jsx)(a.h2,{id:"acesso-a-c\xe9lulas-nas-strings-empacotadas",children:"Acesso a c\xe9lulas nas strings empacotadas"}),"\n",(0,n.jsxs)(a.p,{children:['Para indexar o n-\xe9simo caractere em uma string n\xe3o empacotada armazenada na vari\xe1vel\nmsg, voc\xea usa a express\xe3o "msg[n]". Para strings empacotadas, voc\xea usa\n',(0,n.jsx)(a.code,{children:"msg{n}"}),". Portanto, opera\xe7\xf5es em strings empacotadas diferem de opera\xe7\xf5es em\nstrings n\xe3o empacotadas apenas no uso de chaves, em vez de colchetes; veja a p\xe1gina 110\npara informa\xe7\xf5es adicionais."]}),"\n",(0,n.jsx)(a.p,{children:"As linhas abaixo s\xe3o um exemplo simples de como fazer o loop por todos os caracteres\nem uma string empacotada."}),"\n",(0,n.jsx)(a.p,{children:"Listagem: coment\xe1rio acima da fun\xe7\xe3o packedstring"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"/* Fun\xe7\xe3o que conta os caracteres 'e' em uma string empacotada */\npackedstring(string{})\n{\n    for (new i; string{i}; i++)\n        if (string{i} == 'e')\n            count++\n    return count\n}\n"})}),"\n",(0,n.jsx)(a.h2,{id:"formatadores-gen\xe9ricos-de-sa\xedda",children:"Formatadores gen\xe9ricos de sa\xedda"}),"\n",(0,n.jsx)(a.p,{children:"Os formatadores de sa\xedda printf e strformat foram baseados na fun\xe7\xe3o printf da linguagem de programa\xe7\xe3o C.\nPAWN suporta os seguintes formatadores:"}),"\n",(0,n.jsxs)(a.table,{children:[(0,n.jsx)(a.thead,{children:(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.th,{children:"Formatador"}),(0,n.jsx)(a.th,{children:"Significado"})]})}),(0,n.jsxs)(a.tbody,{children:[(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%b"})}),(0,n.jsx)(a.td,{children:"n\xfamero na base bin\xe1ria"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%c"})}),(0,n.jsx)(a.td,{children:"caractere"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%d"})}),(0,n.jsx)(a.td,{children:"n\xfamero na base decimal (e sinalizado)"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%f"})}),(0,n.jsx)(a.td,{children:"n\xfamero de ponto flutuante"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%q"})}),(0,n.jsx)(a.td,{children:"n\xfamero de ponto fixo"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%r"})}),(0,n.jsx)(a.td,{children:'n\xfamero racional em nota\xe7\xe3o de fra\xe7\xe3o ("1/4" em vez de "0.25")'})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%s"})}),(0,n.jsx)(a.td,{children:"string"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%x"})}),(0,n.jsx)(a.td,{children:"n\xfamero na base hexadecimal"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.strong,{children:"%%"})}),(0,n.jsxs)(a.td,{children:["literal ",(0,n.jsx)(a.code,{children:"%"})]})]})]})]}),"\n",(0,n.jsx)(a.p,{children:"O formatador %f est\xe1 dispon\xedvel apenas se a implementa\xe7\xe3o incluir suporte a\nponto flutuante. Observe que %f apenas formata o n\xfamero; n\xe3o converte\numa representa\xe7\xe3o num\xe9rica inteiro-para-ponto-flutuante.\nO mesmo vale para %q."}),"\n",(0,n.jsx)(a.p,{children:"Os formatadores %d e %x tamb\xe9m podem conter uma largura de campo opcional (inserida\nentre o % e a letra) para gerar o n\xfamero em uma quantidade fixa de\nd\xedgitos(ignorando o sinal)."}),"\n",(0,n.jsx)(a.p,{children:"Os formatadores %f e %q podem conter precis\xe3o opcional (inserida entre\no % e a letra) para especificar o n\xfamero de d\xedgitos decimais. A precis\xe3o padr\xe3o para o formatador %f \xe9 6."}),"\n",(0,n.jsx)(a.p,{children:"Voc\xea pode usar o formatador %r para sa\xedda proporcional, onde a largura de campo\nespecifica a precis\xe3o (padr\xe3o de 3) e o n\xfamero \xe9 impresso como uma fra\xe7\xe3o\ninteira mais uma fra\xe7\xe3o. Observe por\xe9m, que enquanto o formatador %r exibe um n\xfamero (racional) como uma fra\xe7\xe3o, voc\xea n\xe3o pode usar a representa\xe7\xe3o\nde fra\xe7\xe3o para entrada de constantes de ponto fixo ou ponto flutuante em PAWN."}),"\n",(0,n.jsx)(a.h2,{id:"o-operador-query-do-formatador",children:'O operador "query" do formatador'}),"\n",(0,n.jsx)(a.p,{children:"O ponto de interroga\xe7\xe3o (?) em uma string de formato dispara uma invoca\xe7\xe3o autom\xe1tica de um prompt na sa\xedda. Por exemplo:"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: formatador de consulta"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'new value\ngetvalue(value, "?Valor da chave = ")\n'})}),"\n",(0,n.jsx)(a.p,{children:'O caractere "?" na instru\xe7\xe3o tamb\xe9m exibe\num caractere de prompt "?", ap\xf3s o texto "Valor da chave = ".'}),"\n",(0,n.jsx)(a.h2,{id:"tags-fortes-e-fracos",children:"Tags fortes e fracos"}),"\n",(0,n.jsx)(a.p,{children:'Um tag "fraco" \xe9 normalmente apenas um nome simb\xf3lico para fins de\ndocumenta\xe7\xe3o. Uma vari\xe1vel com um tag fraco pode ser usada em c\xf3digo sem\no tag. Por exemplo, para ver a diferen\xe7a entre horas e minutos, voc\xea pode definir\nas tags como:'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: tag fraco"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"new hours:h = 3\nnew minutes:m = 58\n"})}),"\n",(0,n.jsx)(a.p,{children:"onde tanto horas como minutos s\xe3o tags sem declara\xe7\xe3o. Em seguida, voc\xea pode usar\nas vari\xe1veis h e m sem restric\xe7\xf5es de tipo, porque o compilador\nignora um tag que n\xe3o tem declara\xe7\xe3o."}),"\n",(0,n.jsx)(a.p,{children:"Um tag forte \xe9 aquele que come\xe7a com uma letra mai\xfascula e que possui uma\ndeclara\xe7\xe3o. Para tags fortes, voc\xea tamb\xe9m pode declarar os operadores que s\xe3o\nv\xe1lidos (mais adiante). Voc\xea pode usar uma vari\xe1vel com uma tag forte apenas onde uma express\xe3o\ncom a mesma tag \xe9 esperada. Veja as p\xe1ginas 68 e 78 para mais informa\xe7\xf5es sobre tags."}),"\n",(0,n.jsx)(a.p,{children:"Listagem: tag forte"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'enum Boolean: /* o nome de enum da diretiva enum \xe9 uma tag "forte" */\n{\n    false,\n    true\n}\n\nstock Boolean:IsPositive(value)\n    return (value >= 0) ? true : false\n'})}),"\n",(0,n.jsx)(a.p,{children:'Se voc\xea usasse IsPositive na instru\xe7\xe3o condicional como abaixo\n(onde vari\xe1vel "n" \xe9 um inteiro normal)'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: usando uma fun\xe7\xe3o com tag forte como condi\xe7\xe3o (com bug)"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"if (IsPositive(n))\n    // ...\n"})}),"\n",(0,n.jsxs)(a.p,{children:['o compilador emitiria uma mensagem de "tag mismatch" (incompatibilidade de tag) porque IsPositive\nretorna Boolean e a instru\xe7\xe3o if espera uma express\xe3o sem tag. O c\xf3digo\ntem outro "bug": se Boolean',":false",' j\xe1 tiver o valor zero, ent\xe3o retornar o valor false seria suficiente, e n\xe3o seria necess\xe1rio chamar a fun\xe7\xe3o\nIsPositive("se false \xe9 zero" como a express\xe3o condicional avaliada)']}),"\n",(0,n.jsx)(a.h2,{id:"comparando-ma\xe7\xe3s-e-laranjas",children:'Comparando "ma\xe7\xe3s" e "laranjas"'}),"\n",(0,n.jsx)(a.p,{children:"Quando dois argumentos t\xeam tipos diferentes (ou seja, tags diferentes), pode-se falar em comparar ma\xe7\xe3s e laranjas. Tags fortes podem ter operadores especiais\nque s\xe3o criados para eles, e operadores que trabalham em express\xf5es com um tipo\nespec\xedfico de tag forte s\xe3o preferidos a operadores gen\xe9ricos (sem tag).\nMas com tags fracos (ou sem tags) existe apenas o operador gen\xe9rico \xfanico."}),"\n",(0,n.jsx)(a.p,{children:"O operador gen\xe9rico deve escolher um ou outro tipo de compara\xe7\xe3o\npara este caso. Veja a equa\xe7\xe3o abaixo:"}),"\n",(0,n.jsx)(a.p,{children:"$n == a[i] * b$"}),"\n",(0,n.jsx)(a.p,{children:'Se n, a[i] e b forem todos n\xfameros de ponto flutuante, o operador aritm\xe9tico e a\ncompara\xe7\xe3o devem usar aritm\xe9tica de ponto flutuante. Se forem todos inteiros,\nvoc\xea usa aritm\xe9tica de inteiros. Dependendo do que voc\xea deseja, voc\xea pode ent\xe3o assumir\nque, em uma equa\xe7\xe3o "mista" de inteiros e n\xfameros de ponto flutuante, os operadores\nir\xe3o tratar os inteiros como n\xfameros de ponto flutuante ou tratar os n\xfameros de ponto\nflutuante como inteiros (arredondando-os para inteiros), dependendo da implementa\xe7\xe3o do operador.'}),"\n",(0,n.jsx)(a.h2,{id:"evitando-sair-de-um-script-em-execu\xe7\xe3o",children:"Evitando sair de um script em execu\xe7\xe3o"}),"\n",(0,n.jsx)(a.p,{children:"Se sua aplica\xe7\xe3o permitir que scripts sejam baixados por qualquer usu\xe1rio, e n\xe3o apenas administradores confi\xe1veis, voc\xea pode querer adicionar prote\xe7\xe3o contra\nrunaway scripts \u2014 um script que vai al\xe9m do seu ciclo de vida aceit\xe1vel. Dentro de uma fun\xe7\xe3o callback, voc\xea pode verificar o n\xfamero de itera\xe7\xf5es que passou e da vez a execu\xe7\xe3o de volta para o programa hospedeiro se um n\xfamero pr\xe9-determinado de itera\xe7\xf5es n\xe3o resultou em cessa\xe7\xe3o natural do script."}),"\n",(0,n.jsx)(a.p,{children:'A fun\xe7\xe3o callback, abaixo, verifica o n\xedvel de recurs\xe3o. Se o n\xedvel de recurs\xe3o for zero, \xe9 uma "fun\xe7\xe3o de n\xedvel superior" que foi chamada diretamente ou indiretamente pela fun\xe7\xe3o callback anterior executada. A fun\xe7\xe3o ent\xe3o lembra a hora em que foi chamada. Fun\xe7\xf5es de n\xedvel n\xe3o superior s\xe3o aquelas que s\xe3o fun\xe7\xf5es de callback aninhadas. Para elas, a fun\xe7\xe3o apenas verifica se o script atingiu outro "marco" de chamada e verifica a diferen\xe7a de tempo com o momento em que a primeira fun\xe7\xe3o de callback foi ativada.'}),"\n",(0,n.jsx)(a.p,{children:"Listagem: abort.p"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'@receita(time, const heession_id[], count)\n    check_recursion_level(time)\n\n@abortscipt()\n{\n    printf("Script abortado!\\n")\n    return true;\n}\n\nstatic check_recursion_level(time)\n{\n    static base_time\n    static count\n\n    new level = calldepth() /* obt\xe9m o n\xedvel de recurs\xe3o */\n    if (level == 0)\n    {\n        base_time = time\n        count = 0\n    }\n    else if (++count > 10)\n    {\n        count = 0\n        if (time - base_time > 300)\n            abort()\n    }\n}\n'})}),"\n",(0,n.jsx)(a.p,{children:"Observe que fun\xe7\xf5es callback s\xe3o geralmente nativas, e seus nomes dependem do programa hospedeiro."}),"\n",(0,n.jsx)(a.h2,{id:"entrada-de-arquivo-em-pawn",children:"Entrada de arquivo em PAWN"}),"\n",(0,n.jsx)(a.p,{children:"A linguagem PAWN n\xe3o tem nenhuma funcionalidade E/S embutida. Isso significa que s\xf3 \xe9 poss\xedvel ler arquivos por meios espec\xedficos que a implementa\xe7\xe3o fornece (se houver). A aplica\xe7\xe3o iniesta pode, por exemplo, suportar fun\xe7\xf5es como fopen() e fread()."}),"\n",(0,n.jsx)(a.p,{children:"Em outros sistemas embarcados, os dados necess\xe1rios para a execu\xe7\xe3o do script podem ser armazenados como dados na RAM ou ROM em vez de armazenados no disco como um arquivo"}),"\n",(0,n.jsx)(a.h2,{id:"fixando-um-endere\xe7o-ou-de-um-array-local-global",children:"Fixando um endere\xe7o ou de um array local global"}),"\n",(0,n.jsx)(a.p,{children:"Uma fun\xe7\xe3o nativa pode desejar armazenar um ponteiro (um endere\xe7o efetivo) para uma vari\xe1vel, para que essa vari\xe1vel possa ser lida ou escrita de modo ass\xedncrono em\nrela\xe7\xe3o \xe0 execu\xe7\xe3o do programa."}),"\n",(0,n.jsx)(a.p,{children:"Considere uma comunica\xe7\xe3o serial com hardware de rel\xf3gio de tempo real via I2C (ou um\nprotocolo similar): para definir a hora, voc\xea transmite o endere\xe7o do dispositivo do hardware RTC, e\no endere\xe7o do valor a ser definido, e os bytes a serem definidos. Ler a hora \xe9\nsemelhante, mas os dados recebidos de volta v\xe3o para um array no programa em PAWN. Tipicamente\nvoc\xea n\xe3o deseja ler individual bytes, mas ler toda a estrutura RTC de forma s\xedncrona\n(para minimizar a chance de obter dados trocados). Portanto, a\nfun\xe7\xe3o para obter a hora pode receber um array de sa\xedda na chamada de fun\xe7\xe3o, mas\nn\xe3o preencher o array at\xe9 que a leitura esteja completa \u2014 o que pode ser em um ponto\nposterior ou imprevis\xedvel no tempo."}),"\n",(0,n.jsx)(a.p,{children:'A implementa\xe7\xe3o desta funcionalidade em uma fun\xe7\xe3o nativa n\xe3o \xe9 trivial. O\nponto chave a observar \xe9 que a \xfanica maneira de uma fun\xe7\xe3o nativa dar acesso direto\na dados, \xe9 a passagem de par\xe2metros por refer\xeancia. PAWN n\xe3o tem ponteiros\ne, portanto, uma string ou array em PAWN ser\xe1 passado para a fun\xe7\xe3o nativa\ncomo um endere\xe7o \u2014 isso ocorre de forma transparente para a fun\xe7\xe3o nativa, mas o host\ntem acesso n\xe3o apenas aos dados, mas tamb\xe9m ao endere\xe7o dos dados. Armado com\num endere\xe7o (direto), a fun\xe7\xe3o nativa pode ent\xe3o acessar os dados "de forma ass\xedncrona".'}),"\n",(0,n.jsx)(a.p,{children:'H\xe1 uma considera\xe7\xe3o adicional para vari\xe1veis locais: estas "vivem" na pilha e seu\nendere\xe7o \xe9 apenas v\xe1lido enquanto a fun\xe7\xe3o que as declara est\xe1 ativa.\nSe voc\xea passar o endere\xe7o de uma vari\xe1vel local para uma fun\xe7\xe3o nativa sair em\nseguida, o endere\xe7o que voc\xea entregou para a fun\xe7\xe3o nativa se torna\nmuito provavelmente lixo.'}),"\n",(0,n.jsx)(a.p,{children:"Para aquelas situa\xe7\xf5es em que um endere\xe7o fixo de uma vari\xe1vel local \xe9 obrigat\xf3rio, a\ndiretiva #pragma dynamic ajuda a obter esse endere\xe7o. Considere o fragmento de c\xf3digo abaixo, onde a\nfun\xe7\xe3o GetTime \xe9 chamada (fun\xe7\xe3o hipot\xe9tica) para iniciar a aquisi\xe7\xe3o de dados de\ntempo de forma ass\xedncrona, e a fun\xe7\xe3o IsTimeReady verifica a conclus\xe3o da aquisi\xe7\xe3o de dados.\nQuem quer que seja que esteja definindo a hora, algu\xe9m estar\xe1 trabalhando com um\narray de dados definido. A fun\xe7\xe3o nativa GetTime manipula o\narray diretamente, sem intera\xe7\xe3o com a linguagem PAWN \u2014 na verdade, manipula a\nmem\xf3ria de forma ass\xedncrona e independente do script PAWN. Quando a aquisi\xe7\xe3o do tempo for\nconclu\xedda, a fun\xe7\xe3o IsTimeReady retorna true e os dados no array estar\xe3o v\xe1lidos."}),"\n",(0,n.jsx)(a.p,{children:"Listagem: obter tempo de maneira ass\xedncrona"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'#pragma dynamic 16\n\nmain()\n{\n    new time[8]\n    GetTime(time)\n    while (!IsTimeReady)\n    {\n        /* espera */\n    }\n    printf("%d:%d:%d)", time[0], time[1], time[2])\n}\n\n'})}),"\n",(0,n.jsx)(a.p,{children:"Com a diretiva #pragma dynamic, o tamanho heap/stack combinado\n\xe9 ajustado para 16 c\xe9lulas. Com uma pilha pequena, voc\xea pode ter certeza de que o\nendere\xe7o da vari\xe1vel time local estar\xe1 perto do topo da mem\xf3ria de dados. Com\nos padr\xf5es apropriados para endere\xe7os de registradores e IRQ,\na vari\xe1vel time adquire um endere\xe7o fixo."}),"\n",(0,n.jsx)(a.p,{children:"Frequentemente n\xe3o \xe9 problema que o endere\xe7o de uma vari\xe1vel local mude de acordo com\na hora e o local em que \xe9 declarada (posi\xe7\xe3o de pilha do ponto de entrada\nda chamada de fun\xe7\xe3o). Em outros termos, quando a aquisi\xe7\xe3o de dados ass\xedncrona n\xe3o for\nrelaciona a uma rotina de tratamento de interrup\xe7\xe3o mas a uma fun\xe7\xe3o de polling, onde\nos dados s\xe3o consultados em uma chamada de fun\xe7\xe3o expl\xedcita, retornar os dados via par\xe2metro\nde refer\xeancia \xe9 t\xe3o v\xe1lido quanto via vari\xe1vel global."}),"\n",(0,n.jsx)(a.p,{children:"Listagem: obter tempo com poll"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'GetTimePoll(time[])\n{\n    /* Obt\xe9m hora de um RTC ou similar de forma s\xedncrona ou consultando o estado */\n}\n\nmain()\n{\n    new time[8]\n    GetTimePoll(time)\n    printf("%d:%d:%d)", time[0], time[1], time[2])\n}\n'})}),"\n",(0,n.jsx)(a.h2,{id:"alternativas-para-printf",children:"Alternativas para printf"}),"\n",(0,n.jsx)(a.p,{children:"A fun\xe7\xe3o printf \xe9 uma fun\xe7\xe3o de prop\xf3sito geral com uma lista de par\xe2metros aberta. Devido a sua inerente flexibilidade, tamb\xe9m \xe9 relativamente grande e frequentemente n\xe3o pode ser otimizada. Devido \xe0 lista de par\xe2metros de tamanho vari\xe1vel, ela tamb\xe9m for\xe7a um modelo de passagem de argumentos que seja independente de qualquer conhecimento da fun\xe7\xe3o."}),"\n",(0,n.jsx)(a.p,{children:"Se a implementa\xe7\xe3o precisar economizar mem\xf3ria \u2014 em outras palavras, se voc\xea precisar de um execut\xe1vel menor na ROM \u2014 voc\xea pode definir sua pr\xf3pria fun\xe7\xf5es nativas para casos especiais. Por exemplo, em vez de usar printf para exibir uma mensagem de depura\xe7\xe3o como a linha acima, voc\xea pode usar:"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: fun\xe7\xf5es alternativas para printf"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'#define dbgstring(%1) printf("%s", %1)\n#define dbgvalue(%1)  printf("%d", %1)\n'})}),"\n",(0,n.jsx)(a.h2,{id:"pawn-contra-a-escassez-de-mem\xf3ria",children:"PAWN contra a escassez de mem\xf3ria"}),"\n",(0,n.jsx)(a.p,{children:'Comparado a solu\xe7\xf5es puramente baseadas em hardware, a mem\xf3ria de c\xf3digo de um sistema em\nPAWN normalmente ser\xe1 maior. Por um lado, voc\xea executa muitas implementa\xe7\xf5es\nde c\xf3digo usando PAWN que executam a funcionalidade, mas n\xe3o estariam l\xe1 em um\nsolu\xe7\xe3o por hardware (hardware sozinho implementa diretamente a funcionalidade).\nPor outro lado, voc\xea tem o overhead do pr\xf3prio sistema de execu\xe7\xe3o de\nbytecode \u2014 a "M\xe1quina Abstrata".'}),"\n",(0,n.jsx)(a.p,{children:"Os requisitos de mem\xf3ria da m\xe1quina abstrata s\xe3o:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"O c\xf3digo (ROM) da pr\xf3pria m\xe1quina abstrata. A m\xe1quina abstrata mais simples, incluindo uma interface de impress\xe3o para depura\xe7\xe3o, uma interface para gerenciamento de\ntemporizadores/eventos e c\xf3digo de inicializa\xe7\xe3o adicional, \xe9 menor que 8 KiB, em um microcontrolador ARM de 32 bits."}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Os dados (RAM) exigidos pela m\xe1quina abstrata para gerenciamento interno e ponteiros para c\xf3digo de uso \xfanico. Tipicamente, 256 bytes s\xe3o suficientes para este prop\xf3sito."}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Uma pilha (RAM) compartilhada entre a m\xe1quina abstrata e o script PAWN. Dimensionar esta pilha depende da complexidade do script a ser executado."}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:'Segmento de dados (geralmente em RAM) e o segmento de c\xf3digo (preferencialmente em ROM) para o pr\xf3prio script compilado. O link para o arquivo ".amx" para os exemplos de c\xf3digo no manual lhe dar\xe1 estes valores para esse script espec\xedfico.'}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"armadilhas-adicionais",children:"Armadilhas adicionais"}),"\n",(0,n.jsx)(a.p,{children:'Estas "armadilhas" s\xe3o comportamentos corretos pela defini\xe7\xe3o da sintaxe da\nlinguagem, mas podem n\xe3o ser o que voc\xea quis dizer ou pode parecer\ncontra-intuitivo:'}),"\n",(0,n.jsx)(a.p,{children:"Ao definir uma macro LIMIT, certifique-se de n\xe3o adicionar um ponto e v\xedrgula.\nUma defini\xe7\xe3o como:"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: armadilha potencial \u2014 ponto e v\xedrgula ap\xf3s uma substitu\xe7\xe3o de macro #define"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"#define LIMIT 10;\n"})}),"\n",(0,n.jsx)(a.p,{children:'levaria o fragmento de c\xf3digo abaixo a ser analisado com um erro de sintaxe, porque ap\xf3s a expans\xe3o da macro resultaria na express\xe3o "i < 10;":'}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"for (new i = 0; i < LIMIT; ++i)\n"})}),"\n",(0,n.jsx)(a.p,{children:"Al\xe9m disso, note que as regras de coincid\xeancia de padr\xf5es do processsor de macros PAWN\nn\xe3o se estendem atrav\xe9s de linhas e n\xe3o atravessam strings. Portanto, se voc\xea tiver\na macro abaixo:"}),"\n",(0,n.jsx)(a.p,{children:"Listagem: armadilha potencial \u2014 correspond\xeancia de padr\xe3o em uma macro #define"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:"#define a(%1) abc(%1, 2)\n"})}),"\n",(0,n.jsx)(a.p,{children:"o conte\xfado do programa a seguir:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'a("foo bar") /* 1 */\na("baz)\n  ") /* 2 */\na /* 3 */\n(1)\n"a(xyz)" /* 4 */\n'})}),"\n",(0,n.jsx)(a.p,{children:"seria substitu\xeddo como:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-c",children:'abc("foo bar", 2)\na("baz)\n  ")\na\n(1)\n"a(xyz)"\n'})}),"\n",(0,n.jsx)(a.p,{children:"Em outras palavras, apenas o uso da macro a na linha 1 \xe9 substitu\xeddo pela\nsubstitui\xe7\xe3o da macro. As linhas 2 e 3 n\xe3o s\xe3o correspondidas. A linha 4, que est\xe1\nem uma string, tamb\xe9m n\xe3o \xe9 substitu\xedda."}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.a,{href:"00-Contents",children:"Voltar ao \xcdndice"})})]})}function l(e={}){let{wrapper:a}={...(0,s.a)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},50065:function(e,a,o){o.d(a,{Z:()=>d,a:()=>i});var r=o(67294);let n={},s=r.createContext(n);function i(e){let a=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);